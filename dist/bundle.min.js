var NotbankSdk=(()=>{var tr=Object.create;var j=Object.defineProperty,rr=Object.defineProperties,or=Object.getOwnPropertyDescriptor,ir=Object.getOwnPropertyDescriptors,nr=Object.getOwnPropertyNames,Je=Object.getOwnPropertySymbols,sr=Object.getPrototypeOf,$e=Object.prototype.hasOwnProperty,cr=Object.prototype.propertyIsEnumerable;var je=i=>{throw TypeError(i)};var Qe=(i,e,t)=>e in i?j(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,M=(i,e)=>{for(var t in e||(e={}))$e.call(e,t)&&Qe(i,t,e[t]);if(Je)for(var t of Je(e))cr.call(e,t)&&Qe(i,t,e[t]);return i},Oe=(i,e)=>rr(i,ir(e));var mr=(i=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(i,{get:(e,t)=>(typeof require!="undefined"?require:e)[t]}):i)(function(i){if(typeof require!="undefined")return require.apply(this,arguments);throw Error('Dynamic require of "'+i+'" is not supported')});var ur=(i,e)=>()=>(e||i((e={exports:{}}).exports,e),e.exports),ze=(i,e)=>{for(var t in e)j(i,t,{get:e[t],enumerable:!0})},Xe=(i,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of nr(e))!$e.call(i,o)&&o!==t&&j(i,o,{get:()=>e[o],enumerable:!(r=or(e,o))||r.enumerable});return i};var Ze=(i,e,t)=>(t=i!=null?tr(sr(i)):{},Xe(e||!i||!i.__esModule?j(t,"default",{value:i,enumerable:!0}):t,i)),ar=i=>Xe(j({},"__esModule",{value:!0}),i);var we=(i,e,t)=>e.has(i)||je("Cannot "+t);var n=(i,e,t)=>(we(i,e,"read from private field"),t?t.call(i):e.get(i)),S=(i,e,t)=>e.has(i)?je("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(i):e.set(i,t),p=(i,e,t,r)=>(we(i,e,"write to private field"),r?r.call(i,t):e.set(i,t),t),T=(i,e,t)=>(we(i,e,"access private method"),t);var u=(i,e,t)=>new Promise((r,o)=>{var m=l=>{try{E(t.next(l))}catch(ke){o(ke)}},s=l=>{try{E(t.throw(l))}catch(ke){o(ke)}},E=l=>l.done?r(l.value):Promise.resolve(l.value).then(m,s);E((t=t.apply(i,e)).next())});var Ft=ur((Um,Bt)=>{"use strict";Bt.exports=WebSocket});var fr={};ze(fr,{default:()=>Ar});var We={};ze(We,{AccountType:()=>et,ActionType:()=>tt,ChangeReason:()=>rt,DepositFeeMessages:()=>ot,DepositStatus:()=>it,Direction:()=>nt,FeeCalcType:()=>xt,FeeProductType:()=>st,FeeType:()=>Lt,InstrumentType:()=>ct,MakerTaker:()=>mt,NotbankError:()=>A,OrderFlag:()=>ut,OrderSide:()=>at,OrderState:()=>St,OrderTypeInt:()=>Tt,OrderTypeStr:()=>Rt,PegPriceType:()=>pt,ProductType:()=>Et,ReferenceType:()=>lt,ReportFlavor:()=>Ot,ReportFrequency:()=>dt,ReportRequestStatus:()=>_t,ReportWriterResultStatus:()=>At,RiskType:()=>ft,SessionStatus:()=>It,SideType:()=>ht,SubscriptionResponse:()=>Fe,TimeInForce:()=>vt,TradeDirection:()=>Ct,TradeSide:()=>Pt,TransactionReferenceTypes:()=>Nt,TransactionTypes:()=>Ut,UnsubscribeLevel2ErrorCode:()=>gt,UnsubscribeTradesError:()=>Dt,UnsubscriptionResponse:()=>Be,WithdrawErrorCode:()=>Mt,WithdrawFeeMessages:()=>qt,WithdrawTemplateType:()=>bt,orderbookFromRaw:()=>ye});var et=(t=>(t.ASSET="Asset",t.LIABILITY="Liability",t))(et||{});var tt=(r=>(r[r.NEW=0]="NEW",r[r.UPDATE=1]="UPDATE",r[r.DELETION=2]="DELETION",r))(tt||{});var rt=(d=>(d.UNKNOWN="Unknown",d.NEWINPUTACCEPTED="NewInputAccepted",d.NEWINPUTREJECTED="NewInputRejected",d.OTHERREJECTED="OtherRejected",d.EXPIRED="Expired",d.TRADE="Trade",d.SYSTEMCANCELED_NOMOREDMARKET="SystemCanceled_NoMoreMarket",d.SYSTEMCANCELED_BELOWMINIMUM="SystemCanceled_BelowMinimum",d.SYSTEMCANCELED_PRICECOLLAR="SystemCanceled_PriceCollar",d.SYSTEMCANCELED_MARGINFAILED="SystemCanceled_MarginFailed",d.USERMODIFIED="UserModified",d))(rt||{});var ot=(r=>(r.Success="Fee calculated successfully",r.InvalidRequest="Invalid Request",r.AccountOrProductNotFound="Account or Product not found",r))(ot||{});var it=(o=>(o.New="New",o.Pending="Pending",o.FullyProcessed="FullyProcessed",o.Error="Error",o))(it||{});var nt=(r=>(r[r.NoChange=0]="NoChange",r[r.Uptick=1]="Uptick",r[r.DownTick=2]="DownTick",r))(nt||{});var st=(t=>(t.BASE_PRODUCT="BaseProduct",t.SINGLE_PRODUCT="SingleProduct",t))(st||{});var ct=(t=>(t.UNKNOWN="Unknown",t.STANDARD="Standard",t))(ct||{});var mt=(r=>(r[r.Unknown=0]="Unknown",r[r.Maker=1]="Maker",r[r.Taker=2]="Taker",r))(mt||{});var ut=(s=>(s.NoAccountRiskCheck="NoAccountRiskCheck",s.AddedToBook="AddedToBook",s.RemovedFromBook="RemovedFromBook",s.PostOnly="PostOnly",s.Liquidation="Liquidation",s.ReverseMarginPosition="ReverseMarginPosition",s))(ut||{});var at=(t=>(t[t.Buy=0]="Buy",t[t.Sell=1]="Sell",t))(at||{});var St=(s=>(s.Unknown="Unknown",s.Working="Working",s.Rejected="Rejected",s.Canceled="Canceled",s.Expired="Expired",s.FullyExecuted="Fully Executed",s))(St||{});var Tt=(l=>(l[l.Unknown=0]="Unknown",l[l.Market=1]="Market",l[l.Limit=2]="Limit",l[l.StopMarket=3]="StopMarket",l[l.StopLimit=4]="StopLimit",l[l.TrailingStopMarket=5]="TrailingStopMarket",l[l.TrailingStopLimit=6]="TrailingStopLimit",l[l.BlockTrade=7]="BlockTrade",l))(Tt||{}),Rt=(l=>(l.Unknown="Unknown",l.Market="Market",l.Limit="Limit",l.StopMarket="StopMarket",l.StopLimit="StopLimit",l.TrailingStopMarket="TrailingStopMarket",l.TrailingStopLimit="TrailingStopLimit",l.BlockTrade="BlockTrade",l))(Rt||{});var pt=(o=>(o[o.Last=1]="Last",o[o.Bid=2]="Bid",o[o.Ask=3]="Ask",o[o.Midpoint=4]="Midpoint",o))(pt||{});var Et=(o=>(o.UNKNOWN="Unknown",o.NATIONAL_CURRENCY="NationalCurrency",o.CRYPTO_CURRENCY="CryptoCurrency",o.CONTRACT="Contract",o))(Et||{});var lt=(e=>(e.Withdraw="Withdraw",e))(lt||{});var Ot=(s=>(s.TradeActivity="TradeActivity",s.TransactionActivity="TransactionActivity",s.ProductDelta="ProductDelta",s.ProfitAndLoss="ProfitAndLoss",s.Transaction="Transaction",s.Treasury="Treasury",s))(Ot||{});var dt=(s=>(s.OnDemand="OnDemand",s.Hourly="Hourly",s.Daily="Daily",s.Weekly="Weekly",s.Monthly="Monthly",s.Annually="Annually",s))(dt||{});var _t=(d=>(d.Submitted="Submitted",d.Validating="Validating",d.Scheduled="Scheduled",d.InProgress="InProgress",d.Completed="Completed",d.Aborting="Aborting",d.Aborted="Aborted",d.UserCancelled="UserCancelled",d.SysRetired="SysRetired",d.Pending="Pending",d.UserCancelPending="UserCancelPending",d))(_t||{});var At=(m=>(m.NotStarted="NotStarted",m.NotComplete="NotComplete",m.ErrorComplete="ErrorComplete",m.SuccessComplete="SuccessComplete",m.Cancelled="Cancelled",m))(At||{});var ft=(m=>(m.UNKNOWN="Unknown",m.NORMAL="Normal",m.NO_RISK_CHECK="NoRiskCheck",m.NO_TRADING="NoTrading",m.CREDIT="Credit",m))(ft||{});var It=(s=>(s.UNKNOWN="Unknown",s.RUNNING="Running",s.PAUSED="Paused",s.STOPPED="Stopped",s.STARTING="Starting",s.RUNNING_POST_ONLY="RunningPostOnly",s))(It||{});var ht=(t=>(t.BUY="Buy",t.SELL="Sell",t))(ht||{});var vt=(E=>(E[E.Unknown=0]="Unknown",E[E.GTC=1]="GTC",E[E.OPG=2]="OPG",E[E.IOC=3]="IOC",E[E.FOK=4]="FOK",E[E.GTX=5]="GTX",E[E.GTD=6]="GTD",E))(vt||{});var Ct=(r=>(r[r.NoChange=0]="NoChange",r[r.Uptick=1]="Uptick",r[r.DownTick=2]="DownTick",r))(Ct||{});var Pt=(o=>(o[o.Buy=0]="Buy",o[o.Sell=1]="Sell",o[o.Short=2]="Short",o[o.Unknown=3]="Unknown",o))(Pt||{});var Nt=(a=>(a.Trade="Trade",a.Deposit="Deposit",a.Withdraw="Withdraw",a.Transfer="Transfer",a.OrderHold="OrderHold",a.WithdrawHold="WithdrawHold",a.DepositHold="DepositHold",a.MarginHold="MarginHold",a.ManualHold="ManualHold",a.ManualEntry="ManualEntry",a.MarginAcquisition="MarginAcquisition",a.MarginRelinquish="MarginRelinquish",a.MarginInterestNetting="MarginInterestNetting",a.MarginOperatorTransferToMarginAccount="MarginOperatorTransferToMarginAccount",a.MarginOperatorTransferToAssetAccount="MarginOperatorTransferToAssetAccount",a.MarginUserTransfer="MarginUserTransfer",a.MarginPositionReverseTrade="MarginPositionReverseTrade",a.AffiliateRebate="AffiliateRebate",a.DistributionEntry="DistributionEntry",a.TransferHold="TransferHold",a.AirDrop="AirDrop",a))(Nt||{});var Ut=(a=>(a.Fee="Fee",a.Trade="Trade",a.Other="Other",a.Reverse="Reverse",a.Hold="Hold",a.Rebate="Rebate",a.MarginAcquisition="MarginAcquisition",a.MarginRelinquishByTrade="MarginRelinquishByTrade",a.MarginInterestTransfer="MarginInterestTransfer",a.MarginOperatorTransferToMarginAccount="MarginOperatorTransferToMarginAccount",a.MarginOperatorTransferToAssetAccount="MarginOperatorTransferToAssetAccount",a.MarginUserTransfer="MarginUserTransfer",a.MarginRelinquishByTransfer="MarginRelinquishByTransfer",a.MarginRelinquishByReverseTrade="MarginRelinquishByReverseTrade",a.Distribution="Distribution",a.Payment="Payment",a.OperatorLend="OperatorLend",a.OperatorReceived="OperatorReceived",a.Rebalance="Rebalance",a.Commission="Commission",a.AirDrop="AirDrop",a))(Ut||{});var gt=(s=>(s[s.SUCCESS=0]="SUCCESS",s[s.NOT_AUTHORIZED=20]="NOT_AUTHORIZED",s[s.INVALID_REQUEST=100]="INVALID_REQUEST",s[s.OPERATION_FAILED=101]="OPERATION_FAILED",s[s.SERVER_ERROR=102]="SERVER_ERROR",s[s.RESOURCE_NOT_FOUND=104]="RESOURCE_NOT_FOUND",s))(gt||{});var Dt=(m=>(m[m.NotAuthorized=20]="NotAuthorized",m[m.InvalidRequest=100]="InvalidRequest",m[m.OperationFailed=101]="OperationFailed",m[m.ServerError=102]="ServerError",m[m.ResourceNotFound=104]="ResourceNotFound",m))(Dt||{});var Mt=(s=>(s[s.NoError=0]="NoError",s[s.NotAuthorized=20]="NotAuthorized",s[s.InvalidRequest=100]="InvalidRequest",s[s.OperationFailed=101]="OperationFailed",s[s.ServerError=102]="ServerError",s[s.ResourceNotFound=104]="ResourceNotFound",s))(Mt||{});var qt=(r=>(r.Success="Fee calculated successfully",r.InvalidRequest="Invalid Request",r.AccountOrProductNotFound="Account or Product not found",r))(qt||{});var bt=(r=>(r.ToExternalBitcoinAddress="ToExternalBitcoinAddress",r.ToInternalAccount="ToInternalAccount",r.ToBankAccount="ToBankAccount",r))(bt||{});var xt=(t=>(t.Flat="Flat",t.Percentage="Percentage",t))(xt||{}),Lt=(m=>(m.Flat="Flat",m.MakerFee="MakerFee",m.TakerFee="TakerFee",m.PeggedProductFee="PeggedProductFee",m.AffiliateFee="AffiliateFee",m))(Lt||{});function ye(i){return{timestamp:i.timestamp,bids:i.bids.map(e=>({quantity:e[0],price:e[1]})),asks:i.asks.map(e=>({quantity:e[0],price:e[1]}))}}var z=class z extends Error{constructor(e,t){super("Notbank Error. "+e),this.code=t}};z.Factory=class{static createFromApResponse(t){var r="";return t.errorcode&&(r+=`(code=${t.errorcode})`),t.errormsg&&(r+=" "+t.errormsg+"."),t.detail&&(r+=" "+t.detail+"."),new z(r,t.errorcode||t.statusCode)}static createFromNbResponse(t){var r="";return t.message&&(r+=t.message,t.message.endsWith(".")||(r+=".")),t.detail&&(r+=" "+t.detail,t.detail.endsWith(".")||(r+=".")),new z(r,-1)}};var A=z;var Be=class{};var Fe=class{};var Gt=Ze(mr("crypto"),1);function Sr(i){return Math.floor(Math.random()*i)}function de(){return Sr(1e6).toString()}function _e(i,e,t,r){var o=r+t+i;let m=Gt.default.createHmac("sha256",e);return m.update(o),m.digest("hex")}var k,kt,wt,X=class X{static handle(e){return u(this,null,function*(){var o,m;if(e.status>=400||e.status<200)throw new Error(`http error (${e.status}) not a successfull response. ${yield T(o=X,k,wt).call(o,e)}`);var t=yield T(m=X,k,kt).call(m,e);if(!t)throw new A("http error. (status="+e.status+")",-1);var r=t;if((r==null?void 0:r.result)===!1&&(r==null?void 0:r.errorcode)!=null)throw A.Factory.createFromApResponse(r);return t})}};k=new WeakSet,kt=function(e){return u(this,null,function*(){try{return yield e.json()}catch(t){return null}})},wt=function(e){return u(this,null,function*(){try{return yield e.text()}catch(t){return null}})},S(X,k);var Ae=X;var Ie,yt,he=class he{static handle(e,t){return u(this,null,function*(){var m;var r=yield T(m=he,Ie,yt).call(m,e);if(!r)throw new A("http error. (status="+e.status+")",-1);var o=r;if((o==null?void 0:o.status)==="success")return t?r:o.data;throw A.Factory.createFromNbResponse(o)})}};Ie=new WeakSet,yt=function(e){return u(this,null,function*(){try{return yield e.json()}catch(t){return null}})},S(he,Ie);var fe=he;var q,ve=class{constructor(){S(this,q);p(this,q,null)}updateSessionToken(e){p(this,q,e)}request(e){var t=e.requestType==="POST"?e.url:this.getUrlWithSearchParams(e.url,e.params),r=e.requestType==="POST"?e.params:null,o={method:e.requestType,headers:this.getHeaders(e.extraHeaders)};return r&&(o.body=JSON.stringify(r)),fetch(t,o)}getHeaders(e){var t={"Content-type":"application/json",charset:"UTF-8"};return n(this,q)&&(t.aptoken=n(this,q)),e?M(M({},t),e):t}getUrlWithSearchParams(e,t){return t?e+"?"+new URLSearchParams(t):e}};q=new WeakMap;var b,w,Ce=class{constructor(e){S(this,b);S(this,w);p(this,b,new ve),p(this,w,"https://"+e)}nbRequest(e,t,r,o=!1){return u(this,null,function*(){let m=this.getNbUrl(e);var s=yield n(this,b).request({url:m,requestType:t,params:r});return yield fe.handle(s,o)})}apRequest(e,t,r,o){return u(this,null,function*(){let m=this.getApUrl(e);var s=yield n(this,b).request({url:m,requestType:t,params:r,extraHeaders:o});return yield Ae.handle(s)})}authenticateUser(e){return u(this,null,function*(){var t=yield this.apRequest("AuthenticateUser","GET",null,e);n(this,b).updateSessionToken(t.SessionToken)})}subscribe(e,t,r,o,m){throw new Error("Method not implemented.")}unsubscribe(e,t,r,o,m){throw new Error("Method not implemented.")}setResponseHandler(e){throw new Error("Method not implemented.")}setResponseHandlers(e){throw new Error("Method not implemented.")}getApUrl(e){return n(this,w)+"/ap/"+e}getNbUrl(e){return n(this,w)+"/api/nb/"+e}};b=new WeakMap,w=new WeakMap;function c(i,e){return Oe(M({},i),{OMSId:e})}var y=class{constructor(e){this.OMS_ID=1;this.connection=e}getAccountTransactions(e){let t=c(e,this.OMS_ID);return this.connection.apRequest("GetAccountTransactions","POST",t)}getAccountPositions(e){let t=c(e,this.OMS_ID);return this.connection.apRequest("GetAccountPositions","POST",t)}getAccountInstrumentStatistics(e){let t=c(e,this.OMS_ID);return this.connection.apRequest("GetAccountInstrumentStatistics","POST",t)}getAccountInfo(e){return u(this,null,function*(){let t=c(e,this.OMS_ID);return this.connection.apRequest("GetAccountInfo","POST",t)})}};var B=class{constructor(e){this.connection=e}webAuthenticateUser(e){return u(this,null,function*(){return yield this.connection.apRequest("WebAuthenticateUser","NONE",e)})}logOut(){return u(this,null,function*(){return yield this.connection.apRequest("LogOut","POST")})}};var F=class{constructor(e){this.OMS_ID=1;this.connection=e}getDepositFee(e){let t=c(e,this.OMS_ID);return this.connection.apRequest("GetDepositFee","POST",t)}getWithdrawFee(e){let t=c(e,this.OMS_ID);return this.connection.apRequest("GetWithdrawFee","POST",t)}getOMSWithdrawFees(e){let t=c(e,this.OMS_ID);return this.connection.apRequest("GetOMSWithdrawFees","POST",t)}getOMSDepositFees(e){return u(this,null,function*(){let t=c(e,this.OMS_ID);return this.connection.apRequest("GetOMSDepositFees","POST",t)})}getAccountFees(e){return u(this,null,function*(){let t=c(e,this.OMS_ID);return this.connection.apRequest("GetAccountFees","POST",t)})}getOrderFee(e){return u(this,null,function*(){let t=c(e,this.OMS_ID);return this.connection.apRequest("GetOrderFee","POST",t)})}};var W=class{constructor(e){this.OMS_ID=1;this.connection=e}getInstruments(e={}){let t=c(e,this.OMS_ID);return this.connection.apRequest("GetInstruments","POST",t)}getInstrument(e){let t=c(e,this.OMS_ID);return this.connection.apRequest("GetInstrument","POST",t)}getInstrumentVerificationLevelConfigs(e){return u(this,null,function*(){let t=c(e,this.OMS_ID);return this.connection.apRequest("GetInstrumentVerificationLevelConfig","POST",t)})}};var H=class{constructor(e){this.OMS_ID=1;this.connection=e}getProduct(e){let t=c(e,this.OMS_ID);return this.connection.apRequest("GetProduct","POST",t)}getProducts(e){return u(this,null,function*(){let t=c(e,this.OMS_ID);return this.connection.apRequest("GetProducts","POST",t)})}getVerificationLevelConfig(e){return u(this,null,function*(){let t=c(e,this.OMS_ID);return yield this.connection.apRequest("GetVerificationLevelConfig","POST",t)})}};var V=class{constructor(e){this.OMS_ID=1;this.connection=e}generateTradeActivityReport(e){let t=c(e,this.OMS_ID);return this.connection.apRequest("GenerateTradeActivityReport","POST",t)}generateTransactionActivityReport(e){let t=c(e,this.OMS_ID);return this.connection.apRequest("GenerateTransactionActivityReport","POST",t)}generateProductDeltaActivityReport(e){let t=c(e,this.OMS_ID);return this.connection.apRequest("GenerateProductDeltaActivityReport","POST",t)}generatePnLActivityReport(e){let t=c(e,this.OMS_ID);return this.connection.apRequest("GeneratePnLActivityReport","POST",t)}scheduleTradeActivityReport(e){let t=c(e,this.OMS_ID);return this.connection.apRequest("ScheduleTradeActivityReport","POST",t)}scheduleTransactionActivityReport(e){let t=c(e,this.OMS_ID);return this.connection.apRequest("ScheduleTransactionActivityReport","POST",t)}scheduleProductDeltaActivityReport(e){let t=c(e,this.OMS_ID);return this.connection.apRequest("ScheduleProductDeltaActivityReport","POST",t)}scheduleProfitAndLossActivityReport(e){let t=c(e,this.OMS_ID);return this.connection.apRequest("ScheduleProfitAndLossActivityReport","POST",t)}cancelUserReport(e){return this.connection.apRequest("CancelUserReport","POST",e)}getUserReportWriterResultRecords(e){return this.connection.apRequest("GetUserReportWriterResultRecords","POST",e)}getUserReportTickets(e){return this.connection.apRequest("GetUserReportTickets","POST",e)}removeUserReportTicket(e){return this.connection.apRequest("RemoveUserReportTicket","POST",e.UserReportTicketId)}getUserReportTicketsByStatus(e){return this.connection.apRequest("GetUserReportTicketsByStatus","POST",e)}downloadDocument(e){return this.connection.apRequest("DownloadDocument","POST",e)}downloadDocumentSlice(e){return this.connection.apRequest("DownloadDocumentSlice","POST",e)}};var K=class{constructor(e){this.connection=e}ping(){return this.connection.apRequest("Ping","POST")}healthCheck(){return this.connection.apRequest("HealthCheck","POST")}};function Pe(i,e){return i.map(t=>Oe(M({},t),{OMSId:e}))}function Ne(i){return{TradeId:i[0],InstrumentId:i[1],Quantity:i[2],Price:i[3],Order1:i[4],Order2:i[5],Tradetime:i[6],Direction:i[7],TakerSide:i[8],BlockTrade:i[9]==1,OrderClientId:i[10]}}var Y=class{constructor(e){this.OMS_ID=1;this.connection=e}sendOrderList(e){let t=Pe(e,this.OMS_ID);return this.connection.apRequest("SendOrderList","POST",t)}sendCancelList(e){let t=Pe(e,this.OMS_ID);return this.connection.apRequest("SendCancelList","POST",t)}sendCancelReplaceList(e){let t=Pe(e,this.OMS_ID);return this.connection.apRequest("SendCancelReplaceList","POST",t)}modifyOrder(e){let t=c(e,this.OMS_ID);return this.connection.apRequest("ModifyOrder","POST",t)}cancelAllOrders(e){let t=c(e,this.OMS_ID);return this.connection.apRequest("CancelAllOrders","POST",t)}getOrderStatus(e){return u(this,null,function*(){let t=c(e,this.OMS_ID);return this.connection.apRequest("GetOrderStatus","POST",t)})}getOrdersHistory(e){let t=c(e,this.OMS_ID);return this.connection.apRequest("GetOrdersHistory","POST",t)}getTradesHistory(e){let t=c(e,this.OMS_ID);return this.connection.apRequest("GetTradesHistory","POST",t)}getOrderHistoryByOrderId(e){let t=c(e,this.OMS_ID);return this.connection.apRequest("GetOrderHistoryByOrderId","POST",t)}getTickerHistory(e){return u(this,null,function*(){let t=c(e,this.OMS_ID);return(yield this.connection.apRequest("GetTickerHistory","POST",t)).map(o=>({EndDateTime:o[0],High:o[1],Low:o[2],Open:o[3],Close:o[4],Volume:o[5],Bid:o[6],Ask:o[7],InstrumentId:o[8],BeginDateTime:o[9]}))})}getLastTrades(e){return u(this,null,function*(){let t=c(e,this.OMS_ID);return(yield this.connection.apRequest("GetLastTrades","POST",t)).map(o=>Ne(o))})}getLevel1Summary(e){return u(this,null,function*(){let t=c(e,this.OMS_ID);return this.connection.apRequest("GetLevel1Summary","POST",t)})}getLevel1SummaryMin(e){return u(this,null,function*(){let t=c(e,this.OMS_ID);return(yield this.connection.apRequest("GetLevel1SummaryMin","POST",t)).map(o=>({InstrumentId:o[0],InstrumentSymbol:o[1].toString(),LastTradedPx:o[2],Rolling24HrPxChange:o[3],Rolling24HrPxChangePercent:o[4],Rolling24HrVolume:o[5]}))})}getOpenTradeReports(e){let t=c(e,this.OMS_ID);return this.connection.apRequest("GetOpenTradeReports","POST",t)}getOrders(e){let t=c(e,this.OMS_ID);return this.connection.apRequest("GetOrders","POST",t)}getOrderHistory(e){let t=c(e,this.OMS_ID);return this.connection.apRequest("GetOrderHistory","POST",t)}sendOrder(e){return u(this,null,function*(){let t=c(e,this.OMS_ID);return this.connection.apRequest("SendOrder","POST",t)})}cancelReplaceOrder(e){let t=c(e,this.OMS_ID);return this.connection.apRequest("CancelReplaceOrder","POST",t)}cancelOrder(e){let t=c(e,this.OMS_ID);return this.connection.apRequest("CancelOrder","POST",t)}getOpenOrders(e){let t=c(e,this.OMS_ID);return this.connection.apRequest("GetOpenOrders","POST",t)}getAccountTrades(e){let t=c(e,this.OMS_ID);return this.connection.apRequest("GetAccountTrades","POST",t)}getSummary(){return this.connection.apRequest("Summary","POST")}getTicker(){return this.connection.apRequest("Ticker","POST")}getOrderBook(e){return u(this,null,function*(){let t=yield this.connection.apRequest("OrderBook","POST",e);return ye(t)})}getOrderBookRaw(e){return this.connection.apRequest("OrderBook","POST",e)}getTrades(e){return this.connection.apRequest("Trades","POST",e)}getL2Snapshot(e){return u(this,null,function*(){let t=c(e,this.OMS_ID);return(yield this.connection.apRequest("GetL2Snapshot","POST",t)).map(o=>({MDUpdateID:o[0],NumberOfUniqueAccounts:o[1],ActionDateTime:o[2],ActionType:o[3],LastTradePrice:o[4],NumberOfOrders:o[5],Price:o[6],ProductPairCode:o[7],Quantity:o[8],Side:o[9]}))})}getLevel1(e){let t=c(e,this.OMS_ID);return this.connection.apRequest("GetLevel1","POST",t)}getEnums(){return this.connection.apRequest("GetEnums","POST")}};var J=class{constructor(e){this.OMS_ID=1;this.connection=e}getUserAccounts(e){let t=c(e,this.OMS_ID);return this.connection.apRequest("GetUserAccounts","POST",t)}getUserDevices(e){return this.connection.apRequest("GetUserDevices","POST",e)}getUserInfo(e){return this.connection.apRequest("GetUserInfo","POST",e)}getUserPermissions(e){return this.connection.apRequest("GetUserPermissions","POST",e)}};var Q=class{constructor(e){this.connection=e}getBanks(e){return this.connection.nbRequest("banks","GET",e,!0)}createBankAccount(e){return this.connection.nbRequest("bank-accounts","POST",e)}getBankAccount(e){return this.connection.nbRequest("bank-accounts/"+e.bankAccountId,"GET")}getBankAccounts(e){return this.connection.nbRequest("bank-accounts","GET",e,!0)}deleteBankAccount(e){return this.connection.nbRequest("bank-accounts/"+e.bankAccountId,"DELETE")}getNetworksTemplates(e){return this.connection.nbRequest("wallet/crypto/withdrawal/templates","GET",e)}getDepositAddresses(e){return this.connection.nbRequest("bank-accounts","GET",e)}createDepositAddress(e){return this.connection.nbRequest("wallet/crypto","POST",e)}getWhitelistedAddresses(e){return this.connection.nbRequest("wallet/crypto/whitelist-addresses","GET",e)}addWhitelistedAddress(e){return this.connection.nbRequest("wallet/crypto/whitelist-addresses","POST",e)}confirmWhitelistedAddress(e){return this.connection.nbRequest("wallet/crypto/whitelist-addresses/"+e.whitelistedAddressId,"POST",{code:e.code})}deleteWhitelistedAddress(e){return this.connection.nbRequest("wallet/crypto/whitelist-addresses/"+e.whitelistedAddressId,"DELETE",{account_id:e.account_id,otp:e.otp})}updateOneStepWithdraw(e){return this.connection.nbRequest("wallet/crypto/whitelist-addresses/one-step/status","POST",e)}createCryptoWithdraw(e){return this.connection.nbRequest("wallet/crypto/withdrawal","POST",e)}};var Tr="api.notbank.exchange",f,Ue=class{constructor(e){S(this,f);let t=e||Tr;p(this,f,new Ce(t))}authenticateUser(e){var t=de(),r=_e(e.ApiPublicKey,e.ApiSecretKey,e.UserId,t);return n(this,f).authenticateUser({APIKey:e.ApiPublicKey,Signature:r,UserId:e.UserId,Nonce:t})}newAccountService(){return new y(n(this,f))}newAuthService(){return new B(n(this,f))}newFeeService(){return new F(n(this,f))}newInstrumentService(){return new W(n(this,f))}newProductService(){return new H(n(this,f))}newReportService(){return new V(n(this,f))}newSystemService(){return new K(n(this,f))}newTradingService(){return new Y(n(this,f))}newUserService(){return new J(n(this,f))}newWalletService(){return new Q(n(this,f))}};f=new WeakMap;var $t=Ze(Ft(),1);var x,L,$,ge=class{constructor(){S(this,x);S(this,L);S(this,$);p(this,x,{}),p(this,L,{}),p(this,$,2)}putCallback(e){var t=n(this,$);return n(this,L)[t]=e,p(this,$,n(this,$)+2),t}popCallback(e){let t=n(this,L)[e];return delete n(this,L)[e],t!=null?t:r=>null}addSubscriptionCallback(e,t){n(this,x)[e]=t}getSubscriptionCallback(e){return n(this,x)[e]||null}removeSubscriptionCallback(e){e.map(t=>delete n(this,x)[t])}};x=new WeakMap,L=new WeakMap,$=new WeakMap;var Wt=(E=>(E[E.UNDEFINED=-1]="UNDEFINED",E[E.NOT_AN_ERROR=0]="NOT_AN_ERROR",E[E.NOT_AUTHORIZED=20]="NOT_AUTHORIZED",E[E.INVALID_RESPONSE=100]="INVALID_RESPONSE",E[E.OPERATION_FAILED=101]="OPERATION_FAILED",E[E.SERVER_ERROR=102]="SERVER_ERROR",E[E.RESOURCE_NOT_FOUND=104]="RESOURCE_NOT_FOUND",E))(Wt||{}),Ht=Wt;var Me,R,He,Ve,Ke,Ye,Vt,P,Kt,De,Yt,pr,Jt,Qt,O=class O{static get(e,t=null,r=null){var o,m;return e+T(o=O,R,He).call(o,t)+T(m=O,R,He).call(m,r)}static getFromMessageFrame(e){var t,r,o;return(o=(r=(t=n(this,Me))[e.n])==null?void 0:r.call(t,e.n,e.o))!=null?o:e.n}};Me=new WeakMap,R=new WeakSet,He=function(e){return e!=null?"_"+e:""},Ve=function(e,t){var o;let r=T(o=O,R,De).call(o,t,8);return r==null?e:e+"_"+r},Ke=function(e,t){var r;return e+"_"+T(r=O,R,Yt).call(r,t)},Ye=function(e,t){var o;let r=T(o=O,R,De).call(o,t,7);return r==null?e:e+"_"+r},Vt=function(e,t){var o;let r=T(o=O,R,De).call(o,t,1);return r==null?e:e+"_"+r},P=function(e,t){var o;let r=T(o=O,R,Jt).call(o,t);return r!=null||(r=T(this,R,Qt).call(this,t),r!=null)?e+"_"+r:e},Kt=function(e,t){let r=JSON.parse(t),o=e+"_"+r.AccountId;if(r.InstrumentId)return o+"_"+r.InstrumentId},De=function(e,t){let r=JSON.parse(e);return r.length==0||r[0].length<=t?null:r[0][t]},Yt=function(e){return JSON.parse(e).InstrumentId},pr=function(e){return JSON.parse(e).Instrument},Jt=function(e){return JSON.parse(e).AccountId},Qt=function(e){return JSON.parse(e).Account},S(O,R),S(O,Me,{SubscribeLevel1:T(O,R,Ke),Level1UpdateEvent:T(O,R,Ke),SubscribeLevel2:T(O,R,Ye),Level2UpdateEvent:T(O,R,Ye),SubscribeTicker:T(O,R,Ve),TickerDataUpdateEvent:T(O,R,Ve),SubscribeTrades:T(O,R,Vt),SubscribeOrderStateEvents:T(O,R,Kt),TransactionEvent:T(O,R,P),WithdrawTicketUpdateEvent:T(O,R,P),AccountPositionEvent:T(O,R,P),OrderTradeEvent:T(O,R,P),OrderStateEvent:T(O,R,P),DepositTicketUpdateEvent:T(O,R,P),AccountInfoUpdateEvent:T(O,R,P),CancelOrderRejectEvent:T(O,R,P),DepositEvent:T(O,R,P)});var D=O;var Er=i=>{},Z,g,I,ee,te,h,jt,zt,qe,Xt,Zt,be=class{constructor(e){S(this,h);S(this,Z);S(this,g);S(this,I);S(this,ee);S(this,te);p(this,Z,e.domain),p(this,g,new ge),p(this,ee,e.peekMessageIn||(t=>{})),p(this,te,e.peekMessageOut||(t=>{}))}nbRequest(e,t,r){throw new Error("websocket client does not support nb methods.")}connect(){return u(this,arguments,function*(e={}){return p(this,I,new $t.default("wss://"+n(this,Z)+"/wsgateway")),n(this,I).onopen=t=>{var r;return(r=e.onOpen)==null?void 0:r.call(e,t)},n(this,I).onclose=t=>{var r;return(r=e.onClose)==null?void 0:r.call(e,t)},n(this,I).onerror=t=>{var r;return(r=e.onError)==null?void 0:r.call(e,t)},n(this,I).addEventListener("message",t=>{let r=JSON.parse(t.data);T(this,h,zt).call(this,r)}),n(this,I).addEventListener("message",t=>{var r;return(r=e.onMessage)==null?void 0:r.call(e,t)}),new Promise((t,r)=>n(this,I).addEventListener("open",o=>t()))})}close(){n(this,I).close()}get readyState(){return n(this,I).readyState}apRequest(e,t,r){return T(this,h,qe).call(this,e,r,0)}subscribe(e,t,r,o,m){return u(this,null,function*(){return m.map(s=>n(this,g).addSubscriptionCallback(D.get(s.eventName,t,r),s.eventHandler)),T(this,h,qe).call(this,e,o,0)})}unsubscribe(e,t,r,o,m){return u(this,null,function*(){return n(this,g).removeSubscriptionCallback(m.map(s=>D.get(s,t,r))),yield T(this,h,qe).call(this,e,o,0)})}closeConnection(){n(this,I).socket.close()}authenticateUser(e){return u(this,null,function*(){yield this.apRequest("AuthenticateUser","NONE",e)})}};Z=new WeakMap,g=new WeakMap,I=new WeakMap,ee=new WeakMap,te=new WeakMap,h=new WeakSet,jt=function(e){return D.getFromMessageFrame(e)},zt=function(e){n(this,ee).call(this,e);let t=n(this,g).popCallback(e.i);if(t!=null&&(t(e),Or(e)))return;let r=T(this,h,jt).call(this,e),o=n(this,g).getSubscriptionCallback(r);if(o!=null){o(e);return}},qe=function(e,t,r=0){return new Promise((o,m)=>{T(this,h,Zt).call(this,e,JSON.stringify(t)||"{}",r,T(this,h,Xt).call(this,m,o))})},Xt=function(e,t){return r=>{try{var o=JSON.parse(r.o)}catch(s){e(lr(r.o));return}if(r.m===5){e(A.Factory.createFromApResponse(o));return}var m=o;if((m==null?void 0:m.result)===!1&&(m==null?void 0:m.errormsg)!=null){e(A.Factory.createFromApResponse(o));return}t(o)}},Zt=function(e,t,r,o=Er){let m=n(this,g).putCallback(o),s={m:r,i:m,n:e,o:t};n(this,te).call(this,s),n(this,I).send(JSON.stringify(s))};function lr(i){return A.Factory.createFromApResponse({result:!1,errormsg:i,errorcode:Ht.UNDEFINED,statusCode:-1,detail:""})}function Or(i){if(i.m===5)return!0;try{return i.o.result==!1}catch(t){return!1}}function N(i,e){return e==null?null:U(i,e)}function U(i,e){return{eventName:i,eventHandler:t=>e(dr(t.o))}}function dr(i){return JSON.parse(i)}var xe=class{constructor(e){this.OMS_ID=1;this.connection=e}subscribeLevel1(e,t,r){let o=c(e,this.OMS_ID);return this.connection.subscribe("SubscribeLevel1",e.InstrumentId||null,null,o,[U("SubscribeLevel1",t),U("Level1UpdateEvent",r)])}unsubscribeLevel1(e){return u(this,null,function*(){let t=c(e,this.OMS_ID);yield this.connection.unsubscribe("UnsubscribeLevel1",e.InstrumentId||null,null,t,["SubscribeLevel1","UnsubscribeLevel1"])})}subscribeLevel2(e,t,r){let o=c(e,this.OMS_ID);return this.connection.subscribe("SubscribeLevel2",e.InstrumentId,null,o,[U("SubscribeLevel2",t),U("Level2UpdateEvent",r)])}unsubscribeLevel2(e){let t=c(e,this.OMS_ID);return this.connection.unsubscribe("UnsubscribeLevel2",e.InstrumentId||null,null,t,[D.get("SubscribeLevel2",e.InstrumentId)])}subscribeTrades(e,t){let r=c(e,this.OMS_ID);return this.connection.subscribe("SubscribeTrades",e.InstrumentId,null,r,[U("SubscribeTrades",o=>t(Ne(o)))])}unsubscribeTrades(e){let t=c(e,this.OMS_ID);return this.connection.unsubscribe("UnsubscribeTrades",e.InstrumentId,null,t,["SubscribeTrades"])}subscribeTicker(e,t,r){let o=c(e,this.OMS_ID);return this.connection.subscribe("SubscribeTicker",e.InstrumentId||null,null,o,[U("SubscribeTicker",t),U("TickerDataUpdateEvent_"+e.InstrumentId,r)])}unsubscribeTicker(e){let t=c(e,this.OMS_ID);return this.connection.unsubscribe("UnsubscribeTicker",e.InstrumentId||null,null,t,["SubscribeTicker"])}subscribeAccountEvents(e,t){let r=c(e,this.OMS_ID);return this.connection.subscribe("SubscribeAccountEvents",e.AccountId,null,r,[N("WithdrawTicketUpdateEvent",t.withdrawTicketUpdateEventHandler||null),N("OrderTradeEvent",t.orderTradeEventHandler||null),N("OrderStateEvent",t.orderStateEventHandler||null),N("DepositTicketUpdateEvent",t.depositTicketUpdateEventHandler||null),N("AccountPositionEvent",t.accountPositionEventHandler||null),N("AccountInfoUpdateEvent",t.accountInfoUpdateEventHandler||null),N("CancelOrderRejectEvent",t.cancelOrderRejectEventHandler||null),N("DepositEvent",t.depositEventHandler||null),N("TransactionEvent",t.transactionEventHandler||null)].filter(o=>o!=null))}unsubscribeAccountEvents(e){return u(this,null,function*(){let t=c(e,this.OMS_ID);return this.connection.unsubscribe("UnsubscribeAccountEvents",e.AccountId,null,t,["WithdrawTicketUpdateEvent","OrderTradeEvent","OrderStateEvent","DepositTicketUpdateEvent","AccountPositionEvent","AccountInfoUpdateEvent","CancelOrderRejectEvent","DepositEvent","TransactionEvent"])})}subscribeOrderStateEvents(e,t){let r=c(e,this.OMS_ID);return this.connection.subscribe("SubscribeOrderStateEvents",e.AccountId,e.InstrumentId||null,r,[U("OrderStateEvent",t)])}unsubscribeOrderStateEvents(e){let t=c(e,this.OMS_ID);return this.connection.unsubscribe("UnsubscribeOrderStateEvents",e.AccountId,e.InstrumentId||null,t,["SubscribeOrderStateEvents"])}};var _r="api.notbank.exchange",_,G,Le=class{constructor(e){S(this,_);S(this,G);let t=(e==null?void 0:e.domain)||_r;p(this,_,new be({domain:t,peekMessageIn:e==null?void 0:e.peekMessageIn,peekMessageOut:e==null?void 0:e.peekMessageOut}))}connect(e={}){return n(this,_).connect(e)}close(){n(this,_).close()}get isConnecting(){return n(this,_).readyState===WebSocket.CONNECTING}get isConnected(){return n(this,_).readyState===WebSocket.OPEN}get isClosing(){return n(this,_).readyState===WebSocket.CLOSING}get isClosed(){return n(this,_).readyState===WebSocket.CLOSED}authenticateUser(e){return u(this,null,function*(){var t=de(),r=_e(e.ApiPublicKey,e.ApiSecretKey,e.UserId,t);yield n(this,_).authenticateUser({APIKey:e.ApiPublicKey,Signature:r,UserId:e.UserId,Nonce:t})})}newAccountService(){return new y(n(this,_))}newAuthService(){return new B(n(this,_))}newFeeService(){return new F(n(this,_))}newInstrumentService(){return new W(n(this,_))}newProductService(){return new H(n(this,_))}newReportService(){return new V(n(this,_))}newSystemService(){return new K(n(this,_))}getSubscriptionService(){return n(this,G)?n(this,G):(p(this,G,new xe(n(this,_))),n(this,G))}newTradingService(){return new Y(n(this,_))}newUserService(){return new J(n(this,_))}newWalletService(){return new Q(n(this,_))}};_=new WeakMap,G=new WeakMap;var er="api.notbank.exchange",oe,ie,ne,se,ce,me,ue,ae,Se,Te,Re,pe,Ee,le,re=class re{constructor(e){S(this,oe);S(this,ie);S(this,ne);S(this,se);S(this,ce);S(this,me);S(this,ue);S(this,ae);S(this,Se);S(this,Te);S(this,Re);S(this,pe);S(this,Ee);S(this,le);p(this,oe,e.accountService),p(this,ie,e.authService),p(this,ne,e.feeService),p(this,se,e.instrumentService),p(this,ce,e.productService),p(this,me,e.reportService),p(this,ue,e.getSubscriptionService),p(this,ae,e.systemService),p(this,Se,e.tradingService),p(this,Te,e.userService),p(this,Re,e.walletService),p(this,pe,e.authenticate),p(this,Ee,e.connect),p(this,le,e.close)}authenticateUser(e){return n(this,pe).call(this,e)}getAccountService(){return n(this,oe)}getAuthService(){return n(this,ie)}getFeeService(){return n(this,ne)}getInstrumentService(){return n(this,se)}getProductService(){return n(this,ce)}getReportService(){return n(this,me)}getSubscriptionService(){return n(this,ue).call(this)}getSystemService(){return n(this,ae)}getTradingService(){return n(this,Se)}getUserService(){return n(this,Te)}getWalletService(){return n(this,Re)}connect(e={}){return n(this,Ee).call(this,e)}close(){n(this,le).call(this)}};oe=new WeakMap,ie=new WeakMap,ne=new WeakMap,se=new WeakMap,ce=new WeakMap,me=new WeakMap,ue=new WeakMap,ae=new WeakMap,Se=new WeakMap,Te=new WeakMap,Re=new WeakMap,pe=new WeakMap,Ee=new WeakMap,le=new WeakMap,re.Factory=class{static createRestClient(t=er){var r=new Ue(t);return new re({accountService:r.newAccountService(),authService:r.newAuthService(),feeService:r.newFeeService(),instrumentService:r.newInstrumentService(),productService:r.newProductService(),reportService:r.newReportService(),getSubscriptionService:()=>{throw new A("NotbankError. subcription service only exists for websocket connection",-1)},systemService:r.newSystemService(),tradingService:r.newTradingService(),userService:r.newUserService(),walletService:r.newWalletService(),authenticate:o=>r.authenticateUser(o),connect:()=>null,close:()=>null})}static createWebsocketClient(t=er){var r=new Le({domain:t});return new re({accountService:r.newAccountService(),authService:r.newAuthService(),feeService:r.newFeeService(),instrumentService:r.newInstrumentService(),productService:r.newProductService(),reportService:r.newReportService(),getSubscriptionService:r.getSubscriptionService,systemService:r.newSystemService(),tradingService:r.newTradingService(),userService:r.newUserService(),walletService:r.newWalletService(),authenticate:o=>r.authenticateUser(o),connect:()=>r.connect(),close:()=>r.close()})}};var Ge=re;var Ar={NotbankClient:Ge,models:We};return ar(fr);})();
//# sourceMappingURL=bundle.min.js.map
