var NotbankSdk=(()=>{var Gr=Object.create;var ee=Object.defineProperty,Mr=Object.defineProperties,Dr=Object.getOwnPropertyDescriptor,br=Object.getOwnPropertyDescriptors,xr=Object.getOwnPropertyNames,Me=Object.getOwnPropertySymbols,wr=Object.getPrototypeOf,be=Object.prototype.hasOwnProperty,Lr=Object.prototype.propertyIsEnumerable;var xe=n=>{throw TypeError(n)};var De=(n,e,r)=>e in n?ee(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,q=(n,e)=>{for(var r in e||(e={}))be.call(e,r)&&De(n,r,e[r]);if(Me)for(var r of Me(e))Lr.call(e,r)&&De(n,r,e[r]);return n},ae=(n,e)=>Mr(n,br(e));var qr=(n=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(n,{get:(e,r)=>(typeof require!="undefined"?require:e)[r]}):n)(function(n){if(typeof require!="undefined")return require.apply(this,arguments);throw Error('Dynamic require of "'+n+'" is not supported')});var yr=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),we=(n,e)=>{for(var r in e)ee(n,r,{get:e[r],enumerable:!0})},Le=(n,e,r,t)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of xr(e))!be.call(n,o)&&o!==r&&ee(n,o,{get:()=>e[o],enumerable:!(t=Dr(e,o))||t.enumerable});return n};var qe=(n,e,r)=>(r=n!=null?Gr(wr(n)):{},Le(e||!n||!n.__esModule?ee(r,"default",{value:n,enumerable:!0}):r,n)),Fr=n=>Le(ee({},"__esModule",{value:!0}),n);var Ae=(n,e,r)=>e.has(n)||xe("Cannot "+r);var s=(n,e,r)=>(Ae(n,e,"read from private field"),r?r.call(n):e.get(n)),p=(n,e,r)=>e.has(n)?xe("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,r),S=(n,e,r,t)=>(Ae(n,e,"write to private field"),t?t.call(n,r):e.set(n,r),r),R=(n,e,r)=>(Ae(n,e,"access private method"),r);var i=(n,e,r)=>new Promise((t,o)=>{var a=T=>{try{l(r.next(T))}catch(_e){o(_e)}},m=T=>{try{l(r.throw(T))}catch(_e){o(_e)}},l=T=>T.done?t(T.value):Promise.resolve(T.value).then(a,m);l((r=r.apply(n,e)).next())});var dr=yr((lm,Tr)=>{"use strict";Tr.exports=WebSocket});var Zr={};we(Zr,{HttpClient:()=>$r,WebsocketClient:()=>zr,default:()=>Xr});function u(n,e){return ae(q({},n),{OMSId:e})}var x,k=class{constructor(e){p(this,x);this.OMS_ID=1;S(this,x,e)}getUserAccounts(e){return i(this,null,function*(){if(e.UserId&&typeof e.UserId!="number")throw new Error("UserId must be a number.");let r=u(e,this.OMS_ID);return yield s(this,x).request("GetUserAccounts",0,r)})}getUserDevices(e){return i(this,null,function*(){if(e.UserId&&typeof e.UserId!="number")throw new Error("UserId must be a number.");return yield s(this,x).request("GetUserDevices",0,e)})}getUserInfo(e){return i(this,null,function*(){if(e.UserId&&typeof e.UserId!="number")throw new Error("UserId must be a number.");return yield s(this,x).request("GetUserInfo",0,e)})}getUserPermissions(e){return i(this,null,function*(){if(e.UserId==null||typeof e.UserId!="number")throw new Error("UserId is required and must be a number.");return yield s(this,x).request("GetUserPermissions",0,e)})}};x=new WeakMap;var M,V=class{constructor(e){p(this,M);this.OMS_ID=1;S(this,M,e)}getAccountTransactions(e){return i(this,null,function*(){if(e.AccountId&&typeof e.AccountId!="number")throw new Error("AccountId must be a number.");let r=u(e,this.OMS_ID);return yield s(this,M).request("GetAccountTransactions",0,r)})}getAccountPositions(e){return i(this,null,function*(){let r=u(e,this.OMS_ID);return yield s(this,M).request("GetAccountPositions",0,r)})}getAccountInstrumentStatistics(e){return i(this,null,function*(){if(!e.AccountId)throw new Error("AccountId is required field.");let r=u(e,this.OMS_ID);return yield s(this,M).request("GetAccountInstrumentStatistics",0,r)})}getAccountSettlementPositions(e){return i(this,null,function*(){if(!e.AccountId)throw new Error("OMSId and AccountId are required fields.");let r=u(e,this.OMS_ID);return yield s(this,M).request("GetAccountSettlementPositions",0,r)})}getAccountInfo(e){return i(this,null,function*(){let r=u(e,this.OMS_ID);return yield s(this,M).request("GetAccountInfo",0,r)})}};M=new WeakMap;var W,K=class{constructor(e){p(this,W);S(this,W,e)}webAuthenticateUser(e){return i(this,null,function*(){return yield s(this,W).request("WebAuthenticateUser",2,e)})}logOut(){return i(this,null,function*(){return yield s(this,W).request("LogOut",0)})}};W=new WeakMap;var N,Y=class{constructor(e){p(this,N);this.OMS_ID=1;S(this,N,e)}getDepositFee(e){return i(this,null,function*(){let r=u(e,this.OMS_ID);return yield s(this,N).request("GetDepositFee",0,r)})}getWithdrawFee(e){return i(this,null,function*(){let r=u(e,this.OMS_ID);return yield s(this,N).request("GetWithdrawFee",0,r)})}getOMSWithdrawFees(e){return i(this,null,function*(){let r=u(e,this.OMS_ID);return yield s(this,N).request("GetOMSWithdrawFees",0,r)})}getOMSDepositFees(e){return i(this,null,function*(){let r=u(e,this.OMS_ID);return yield s(this,N).request("GetOMSDepositFees",0,r)})}getAccountFees(e){return i(this,null,function*(){if(!e.AccountId)throw new Error("AccountId is required.");let r=u(e,this.OMS_ID);return yield s(this,N).request("GetAccountFees",0,r)})}getOrderFee(e){return i(this,null,function*(){let r=u(e,this.OMS_ID);return yield s(this,N).request("GetOrderFee",0,r)})}};N=new WeakMap;var y,J=class{constructor(e){p(this,y);this.OMS_ID=1;S(this,y,e)}getInstruments(e){return i(this,null,function*(){let r=u(e,this.OMS_ID);return yield s(this,y).request("GetInstruments",0,r)})}getInstrument(e){return i(this,null,function*(){let r=u(e,this.OMS_ID);return yield s(this,y).request("GetInstrument",0,r)})}getInstrumentVerificationLevelConfigs(e){return i(this,null,function*(){if(!e.AccountId)throw new Error("AccountId is required.");let r=u(e,this.OMS_ID);return yield s(this,y).request("GetInstrumentVerificationLevelConfig",0,r)})}};y=new WeakMap;var F,Q=class{constructor(e){p(this,F);this.OMS_ID=1;S(this,F,e)}getProduct(e){return i(this,null,function*(){let r=u(e,this.OMS_ID);return yield s(this,F).request("GetProduct",0,r)})}getProducts(e){return i(this,null,function*(){let r=u(e,this.OMS_ID);return yield s(this,F).request("GetProducts",0,r)})}getVerificationLevelConfig(e){return i(this,null,function*(){let r=u(e,this.OMS_ID);return yield s(this,F).request("GetVerificationLevelConfig",0,r)})}};F=new WeakMap;var ce,$=class{constructor(e){p(this,ce);this.OMS_ID=1;S(this,ce,e)}};ce=new WeakMap;var z,X=class{constructor(e){p(this,z);S(this,z,e)}ping(){return i(this,null,function*(){return yield s(this,z).request("Ping",0)})}healthCheck(){return i(this,null,function*(){return yield s(this,z).request("HealthCheck",0)})}};z=new WeakMap;var he=(T=>(T[T.Unknown=0]="Unknown",T[T.Market=1]="Market",T[T.Limit=2]="Limit",T[T.StopMarket=3]="StopMarket",T[T.StopLimit=4]="StopLimit",T[T.TrailingStopMarket=5]="TrailingStopMarket",T[T.TrailingStopLimit=6]="TrailingStopLimit",T[T.BlockTrade=7]="BlockTrade",T))(he||{}),ye=(T=>(T.Unknown="Unknown",T.Market="Market",T.Limit="Limit",T.StopMarket="StopMarket",T.StopLimit="StopLimit",T.TrailingStopMarket="TrailingStopMarket",T.TrailingStopLimit="TrailingStopLimit",T.BlockTrade="BlockTrade",T))(ye||{});function pe(n,e){return n.map(r=>ae(q({},r),{OMSId:e}))}function Se(n){return{TradeId:n[0],InstrumentId:n[1],Quantity:n[2],Price:n[3],Order1:n[4],Order2:n[5],Tradetime:n[6],Direction:n[7],TakerSide:n[8],BlockTrade:n[9]==1,OrderClientId:n[10]}}var d,Z=class{constructor(e){p(this,d);this.OMS_ID=1;S(this,d,e)}sendOrderList(e){return i(this,null,function*(){let r=pe(e,this.OMS_ID);return yield s(this,d).request("SendOrderList",0,r)})}sendCancelList(e){return i(this,null,function*(){let r=pe(e,this.OMS_ID);return yield s(this,d).request("SendCancelList",0,r)})}sendCancelReplaceList(e){return i(this,null,function*(){let r=pe(e,this.OMS_ID);return yield s(this,d).request("SendCancelReplaceList",0,r)})}modifyOrder(e){return i(this,null,function*(){if(!e.OrderId||!e.InstrumentId||!e.Quantity||!e.AccountId)throw new Error("All fields are required for modifying an order.");let r=u(e,this.OMS_ID);return yield s(this,d).request("ModifyOrder",0,r)})}cancelAllOrders(e){return i(this,null,function*(){let r=u(e,this.OMS_ID);return yield s(this,d).request("CancelAllOrders",0,r)})}getOrderStatus(e){return i(this,null,function*(){if(!e.AccountId&&!e.OrderId)throw new Error("Either AccountId or OrderId is required.");let r=u(e,this.OMS_ID);return yield s(this,d).request("GetOrderStatus",0,r)})}getOrdersHistory(e){return i(this,null,function*(){let r=u(e,this.OMS_ID);return yield s(this,d).request("GetOrdersHistory",0,r)})}getTradesHistory(e){return i(this,null,function*(){let r=u(e,this.OMS_ID);return yield s(this,d).request("GetTradesHistory",0,r)})}getOrderHistoryByOrderId(e){return i(this,null,function*(){let r=u(e,this.OMS_ID);return yield s(this,d).request("GetOrderHistoryByOrderId",0,r)})}getTickerHistory(e){return i(this,null,function*(){let r=u(e,this.OMS_ID);return(yield s(this,d).request("GetTickerHistory",0,r)).map(o=>({EndDateTime:o[0],High:o[1],Low:o[2],Open:o[3],Close:o[4],Volume:o[5],Bid:o[6],Ask:o[7],InstrumentId:o[8],BeginDateTime:o[9]}))})}getLastTrades(e){return i(this,null,function*(){if(!e.InstrumentId)throw new Error("InstrumentId is required for getting last trades.");let r=u(e,this.OMS_ID);return(yield s(this,d).request("GetLastTrades",0,r)).map(o=>Se(o))})}getLevel1Summary(e){return i(this,null,function*(){let r=u(e,this.OMS_ID);return(yield s(this,d).request("GetLevel1Summary",0,r)).map(o=>JSON.parse(o))})}getLevel1SummaryMin(e){return i(this,null,function*(){let r=u(e,this.OMS_ID);return(yield s(this,d).request("GetLevel1SummaryMin",0,r)).map(o=>({InstrumentId:o[0],InstrumentSymbol:o[1].toString(),LastTradedPx:o[2],Rolling24HrPxChange:o[3],Rolling24HrPxChangePercent:o[4],Rolling24HrVolume:o[5]}))})}getOpenTradeReports(e){return i(this,null,function*(){if(!e.AccountId)throw new Error("AccountId is required for retrieving open trade reports.");let r=u(e,this.OMS_ID);return yield s(this,d).request("GetOpenTradeReports",0,r)})}getOrders(e){return i(this,null,function*(){if(!e.AccountId)throw new Error("AccountId is required for retrieving orders.");let r=u(e,this.OMS_ID);return yield s(this,d).request("GetOrders",0,r)})}getOrderHistory(e){return i(this,null,function*(){if(!e.AccountId)throw new Error("AccountId is required for retrieving order history.");let r=u(e,this.OMS_ID);return yield s(this,d).request("GetOrderHistory",0,r)})}sendOrder(e){return i(this,null,function*(){if(e.InstrumentId==null||e.AccountId==null||e.TimeInForce==null||e.Side==null||e.OrderType==null)throw new Error("InstrumentId, AccountId, TimeInForce, Side, and OrderType are required");if(e.OrderType===2&&e.LimitPrice==null)throw new Error("LimitPrice is required for Limit Orders");if(e.UseDisplayQuantity&&(e.DisplayQuantity==null||e.DisplayQuantity<=0))throw new Error("DisplayQuantity must be greater than 0 when UseDisplayQuantity is true");let r=u(e,this.OMS_ID);return yield s(this,d).request("SendOrder",0,r)})}cancelReplaceOrder(e){return i(this,null,function*(){let r=u(e,this.OMS_ID);return yield s(this,d).request("CancelReplaceOrder",0,r)})}cancelOrder(e){return i(this,null,function*(){let r=u(e,this.OMS_ID);return yield s(this,d).request("CancelOrder",0,r)})}getOpenOrders(e){return i(this,null,function*(){if(!e.AccountId)throw new Error("getOpenOrders requires AccountId.");let r=u(e,this.OMS_ID);return yield this["#serviceCore"].request("GetOpenOrders",0,r)})}getAccountTrades(e){return i(this,null,function*(){let r=u(e,this.OMS_ID);return yield s(this,d).request("GetAccountTrades",0,r)})}getSummary(){return i(this,null,function*(){return yield s(this,d).request("Summary",0)})}getTicker(){return i(this,null,function*(){return yield s(this,d).request("Ticker",0)})}getOrderBook(e){return i(this,null,function*(){if(!e.Market_Pair)throw new Error("Market_Pair is required.");return yield s(this,d).request("OrderBook",0,e)})}getTrades(e){return i(this,null,function*(){return yield s(this,d).request("Trades",0,e)})}getL2Snapshot(e){return i(this,null,function*(){if(!e.InstrumentId)throw new Error("InstrumentId is required for retrieving Level 2 snapshot.");if(e.Depth<=0)throw new Error("Depth must be greater than 0.");let r=u(e,this.OMS_ID);return(yield s(this,d).request("GetL2Snapshot",0,r)).map(o=>({MDUpdateID:o[0],NumberOfUniqueAccounts:o[1],ActionDateTime:o[2],ActionType:o[3],LastTradePrice:o[4],NumberOfOrders:o[5],Price:o[6],ProductPairCode:o[7],Quantity:o[8],Side:o[9]}))})}getLevel1(e){return i(this,null,function*(){if(!e.InstrumentId)throw new Error("InstrumentId is required for retrieving Level 1 snapshot.");let r=u(e,this.OMS_ID);return yield s(this,d).request("GetLevel1",0,r)})}getEnums(){return i(this,null,function*(){return yield s(this,d).request("GetEnums",0)})}};d=new WeakMap;var Fe=qe(qr("crypto"));function Hr(n){return Math.floor(Math.random()*n)}function re(){return Hr(1e6).toString()}function te(n,e,r,t){var o=t+r+n;let a=Fe.default.createHmac("sha256",e);return a.update(o),a.digest("hex")}var ve={};we(ve,{AccountType:()=>We,ActionType:()=>Ke,ChangeReason:()=>ke,DepositFeeMessages:()=>Ye,DepositStatus:()=>Je,Direction:()=>Qe,FeeCalcType:()=>Rr,FeeProductType:()=>$e,FeeType:()=>lr,InstrumentType:()=>ze,MakerTaker:()=>Ve,OrderFlag:()=>Xe,OrderSide:()=>Be,OrderState:()=>He,OrderTypeInt:()=>he,OrderTypeStr:()=>ye,PegPriceType:()=>Ze,ProductType:()=>je,ReferenceType:()=>er,RiskType:()=>rr,SessionStatus:()=>tr,SideType:()=>sr,StandardError:()=>D,SubscriptionResponse:()=>Ne,TimeInForce:()=>or,TradeDirection:()=>nr,TradeSide:()=>ir,TransactionReferenceTypes:()=>mr,TransactionTypes:()=>ur,UnsubscribeLevel2ErrorCode:()=>ar,UnsubscribeTradesError:()=>cr,UnsubscriptionResponse:()=>Ce,WithdrawErrorCode:()=>pr,WithdrawFeeMessages:()=>Sr,WithdrawTemplateType:()=>Er});var He=(m=>(m.Unknown="Unknown",m.Working="Working",m.Rejected="Rejected",m.Canceled="Canceled",m.Expired="Expired",m.FullyExecuted="Fully Executed",m))(He||{});var Be=(r=>(r[r.Buy=0]="Buy",r[r.Sell=1]="Sell",r))(Be||{});var ke=(C=>(C.UNKNOWN="Unknown",C.NEWINPUTACCEPTED="NewInputAccepted",C.NEWINPUTREJECTED="NewInputRejected",C.OTHERREJECTED="OtherRejected",C.EXPIRED="Expired",C.TRADE="Trade",C.SYSTEMCANCELED_NOMOREDMARKET="SystemCanceled_NoMoreMarket",C.SYSTEMCANCELED_BELOWMINIMUM="SystemCanceled_BelowMinimum",C.SYSTEMCANCELED_PRICECOLLAR="SystemCanceled_PriceCollar",C.SYSTEMCANCELED_MARGINFAILED="SystemCanceled_MarginFailed",C.USERMODIFIED="UserModified",C))(ke||{});var Ve=(t=>(t[t.Unknown=0]="Unknown",t[t.Maker=1]="Maker",t[t.Taker=2]="Taker",t))(Ve||{});var We=(r=>(r.ASSET="Asset",r.LIABILITY="Liability",r))(We||{});var Ke=(t=>(t[t.NEW=0]="NEW",t[t.UPDATE=1]="UPDATE",t[t.DELETION=2]="DELETION",t))(Ke||{});var Ye=(t=>(t.Success="Fee calculated successfully",t.InvalidRequest="Invalid Request",t.AccountOrProductNotFound="Account or Product not found",t))(Ye||{});var Je=(o=>(o.New="New",o.Pending="Pending",o.FullyProcessed="FullyProcessed",o.Error="Error",o))(Je||{});var Qe=(t=>(t[t.NoChange=0]="NoChange",t[t.Uptick=1]="Uptick",t[t.DownTick=2]="DownTick",t))(Qe||{});var $e=(r=>(r.BASE_PRODUCT="BaseProduct",r.SINGLE_PRODUCT="SingleProduct",r))($e||{});var ze=(r=>(r.UNKNOWN="Unknown",r.STANDARD="Standard",r))(ze||{});var Xe=(m=>(m.NoAccountRiskCheck="NoAccountRiskCheck",m.AddedToBook="AddedToBook",m.RemovedFromBook="RemovedFromBook",m.PostOnly="PostOnly",m.Liquidation="Liquidation",m.ReverseMarginPosition="ReverseMarginPosition",m))(Xe||{});var Ze=(o=>(o[o.Last=1]="Last",o[o.Bid=2]="Bid",o[o.Ask=3]="Ask",o[o.Midpoint=4]="Midpoint",o))(Ze||{});var je=(o=>(o.UNKNOWN="Unknown",o.NATIONAL_CURRENCY="NationalCurrency",o.CRYPTO_CURRENCY="CryptoCurrency",o.CONTRACT="Contract",o))(je||{});var er=(e=>(e.Withdraw="Withdraw",e))(er||{});var rr=(a=>(a.UNKNOWN="Unknown",a.NORMAL="Normal",a.NO_RISK_CHECK="NoRiskCheck",a.NO_TRADING="NoTrading",a.CREDIT="Credit",a))(rr||{});var tr=(m=>(m.UNKNOWN="Unknown",m.RUNNING="Running",m.PAUSED="Paused",m.STOPPED="Stopped",m.STARTING="Starting",m.RUNNING_POST_ONLY="RunningPostOnly",m))(tr||{});var sr=(r=>(r.BUY="Buy",r.SELL="Sell",r))(sr||{});var or=(l=>(l[l.Unknown=0]="Unknown",l[l.GTC=1]="GTC",l[l.OPG=2]="OPG",l[l.IOC=3]="IOC",l[l.FOK=4]="FOK",l[l.GTX=5]="GTX",l[l.GTD=6]="GTD",l))(or||{});var nr=(t=>(t[t.NoChange=0]="NoChange",t[t.Uptick=1]="Uptick",t[t.DownTick=2]="DownTick",t))(nr||{});var ir=(o=>(o[o.Buy=0]="Buy",o[o.Sell=1]="Sell",o[o.Short=2]="Short",o[o.Unknown=3]="Unknown",o))(ir||{});var mr=(c=>(c.Trade="Trade",c.Deposit="Deposit",c.Withdraw="Withdraw",c.Transfer="Transfer",c.OrderHold="OrderHold",c.WithdrawHold="WithdrawHold",c.DepositHold="DepositHold",c.MarginHold="MarginHold",c.ManualHold="ManualHold",c.ManualEntry="ManualEntry",c.MarginAcquisition="MarginAcquisition",c.MarginRelinquish="MarginRelinquish",c.MarginInterestNetting="MarginInterestNetting",c.MarginOperatorTransferToMarginAccount="MarginOperatorTransferToMarginAccount",c.MarginOperatorTransferToAssetAccount="MarginOperatorTransferToAssetAccount",c.MarginUserTransfer="MarginUserTransfer",c.MarginPositionReverseTrade="MarginPositionReverseTrade",c.AffiliateRebate="AffiliateRebate",c.DistributionEntry="DistributionEntry",c.TransferHold="TransferHold",c.AirDrop="AirDrop",c))(mr||{});var ur=(c=>(c.Fee="Fee",c.Trade="Trade",c.Other="Other",c.Reverse="Reverse",c.Hold="Hold",c.Rebate="Rebate",c.MarginAcquisition="MarginAcquisition",c.MarginRelinquishByTrade="MarginRelinquishByTrade",c.MarginInterestTransfer="MarginInterestTransfer",c.MarginOperatorTransferToMarginAccount="MarginOperatorTransferToMarginAccount",c.MarginOperatorTransferToAssetAccount="MarginOperatorTransferToAssetAccount",c.MarginUserTransfer="MarginUserTransfer",c.MarginRelinquishByTransfer="MarginRelinquishByTransfer",c.MarginRelinquishByReverseTrade="MarginRelinquishByReverseTrade",c.Distribution="Distribution",c.Payment="Payment",c.OperatorLend="OperatorLend",c.OperatorReceived="OperatorReceived",c.Rebalance="Rebalance",c.Commission="Commission",c.AirDrop="AirDrop",c))(ur||{});var ar=(m=>(m[m.SUCCESS=0]="SUCCESS",m[m.NOT_AUTHORIZED=20]="NOT_AUTHORIZED",m[m.INVALID_REQUEST=100]="INVALID_REQUEST",m[m.OPERATION_FAILED=101]="OPERATION_FAILED",m[m.SERVER_ERROR=102]="SERVER_ERROR",m[m.RESOURCE_NOT_FOUND=104]="RESOURCE_NOT_FOUND",m))(ar||{});var cr=(a=>(a[a.NotAuthorized=20]="NotAuthorized",a[a.InvalidRequest=100]="InvalidRequest",a[a.OperationFailed=101]="OperationFailed",a[a.ServerError=102]="ServerError",a[a.ResourceNotFound=104]="ResourceNotFound",a))(cr||{});var pr=(m=>(m[m.NoError=0]="NoError",m[m.NotAuthorized=20]="NotAuthorized",m[m.InvalidRequest=100]="InvalidRequest",m[m.OperationFailed=101]="OperationFailed",m[m.ServerError=102]="ServerError",m[m.ResourceNotFound=104]="ResourceNotFound",m))(pr||{});var Sr=(t=>(t.Success="Fee calculated successfully",t.InvalidRequest="Invalid Request",t.AccountOrProductNotFound="Account or Product not found",t))(Sr||{});var Er=(t=>(t.ToExternalBitcoinAddress="ToExternalBitcoinAddress",t.ToInternalAccount="ToInternalAccount",t.ToBankAccount="ToBankAccount",t))(Er||{});var Rr=(r=>(r.Flat="Flat",r.Percentage="Percentage",r))(Rr||{}),lr=(a=>(a.Flat="Flat",a.MakerFee="MakerFee",a.TakerFee="TakerFee",a.PeggedProductFee="PeggedProductFee",a.AffiliateFee="AffiliateFee",a))(lr||{});var Ee=class extends Error{};var D=class extends Ee{constructor(e){var r=`Standard Error (code=${e.errorcode})`;e.errormsg&&(r+=". "+e.errormsg),e.detail&&(r+=". "+e.detail),super(r),this.errorcode=e.errorcode||e.statusCode,this.errormsg=e.errormsg,this.detail=e.detail}};var Ce=class{};var Ne=class{};var w,se,Re=class{constructor(e){p(this,w);p(this,se);S(this,w,null),S(this,se,"https://"+e+"/ap/")}request(e,r,t){return i(this,null,function*(){if(r===1)return this.requestGet(e,{params:t});if(r===0)return this.requestPost(e,t);throw new Error(`Request type not implemented. ${r}`)})}requestPost(e,r){return i(this,null,function*(){var t=yield fetch(this.getUrl(e),{method:"POST",body:r?JSON.stringify(r):null,headers:this.getHeaders()});return this.handleResponse(t)})}requestGet(t){return i(this,arguments,function*(e,r={}){var o=yield fetch(this.getUrlWithSearchParams(e,r.params),{method:"GET",headers:this.getHeaders(r.extraHeaders)});return yield this.handleResponse(o)})}handleResponse(e){return i(this,null,function*(){if(e.status>=300||e.status<200)throw new Error(`http error (${e.status}) not a successfull response. ${e.text()}`);var r=yield e.json(),t=r;if((t==null?void 0:t.result)===!1&&(t==null?void 0:t.errorcode)!=null)throw new D(t);return r})}getHeaders(e){var r={"Content-type":"application/json",charset:"UTF-8"};return s(this,w)!=null&&(r.aptoken=s(this,w)),e?q(q({},r),e):r}getUrlWithSearchParams(e,r){return r?this.getUrl(e)+"?"+new URLSearchParams(r):this.getUrl(e)}authenticate(e){return i(this,null,function*(){var r=yield this.requestGet("Authenticate",{extraHeaders:e});S(this,w,r.SessionToken)})}authenticateUser(e){return i(this,null,function*(){var r=yield this.requestGet("AuthenticateUser",{extraHeaders:e});S(this,w,r.SessionToken)})}subscribe(e,r,t,o,a){throw new Error("Method not implemented.")}unsubscribe(e,r,t,o,a){throw new Error("Method not implemented.")}setResponseHandler(e){throw new Error("Method not implemented.")}setResponseHandlers(e){throw new Error("Method not implemented.")}getUrl(e){return s(this,se)+e}};w=new WeakMap,se=new WeakMap;var Br="api.notbank.exchange",_,oe=class{constructor(e){p(this,_);let r=e||Br;S(this,_,new Re(r))}authenticate(e){return i(this,null,function*(){var r=re(),t=te(e.ApiPublicKey,e.ApiSecretKey,e.UserId,r);yield s(this,_).authenticate({ApiKey:e.ApiPublicKey,Signature:t,UserId:e.UserId,Nonce:r})})}authenticateUser(e){return i(this,null,function*(){var r=re(),t=te(e.ApiPublicKey,e.ApiSecretKey,e.UserId,r);yield s(this,_).authenticateUser({ApiKey:e.ApiPublicKey,Signature:t,UserId:e.UserId,Nonce:r})})}newAccountService(){return new V(s(this,_))}newAuthService(){return new K(s(this,_))}newFeeService(){return new Y(s(this,_))}newInstrumentService(){return new J(s(this,_))}newProductService(){return new Q(s(this,_))}newReportService(){return new $(s(this,_))}newSystemService(){return new X(s(this,_))}newTradingService(){return new Z(s(this,_))}newUserService(){return new k(s(this,_))}};_=new WeakMap;var Nr=qe(dr());var H,B,j,le=class{constructor(){p(this,H);p(this,B);p(this,j);S(this,H,{}),S(this,B,{}),S(this,j,2)}putCallback(e){var r=s(this,j);return s(this,B)[r]=e,S(this,j,s(this,j)+2),r}popCallback(e){let r=s(this,B)[e];return delete s(this,B)[e],r!=null?r:t=>null}addSubscriptionCallback(e,r){s(this,H)[e]=r}getSubscriptionCallback(e){return s(this,H)[e]||null}removeSubscriptionCallback(e){e.map(r=>delete s(this,H)[r])}};H=new WeakMap,B=new WeakMap,j=new WeakMap;var Or=(l=>(l[l.UNDEFINED=-1]="UNDEFINED",l[l.NOT_AN_ERROR=0]="NOT_AN_ERROR",l[l.NOT_AUTHORIZED=20]="NOT_AUTHORIZED",l[l.INVALID_RESPONSE=100]="INVALID_RESPONSE",l[l.OPERATION_FAILED=101]="OPERATION_FAILED",l[l.SERVER_ERROR=102]="SERVER_ERROR",l[l.RESOURCE_NOT_FOUND=104]="RESOURCE_NOT_FOUND",l))(Or||{}),Ir=Or;var de,E,Ue,ge,Pe,Ge,fr,v,_r,Te,Ar,Vr,hr,Cr,O=class O{static get(e,r=null,t=null){var o,a;return e+R(o=O,E,Ue).call(o,r)+R(a=O,E,Ue).call(a,t)}static getFromMessageFrame(e){var r,t,o;return(o=(t=(r=s(this,de))[e.n])==null?void 0:t.call(r,e.n,e.o))!=null?o:e.n}};de=new WeakMap,E=new WeakSet,Ue=function(e){return e!=null?"_"+e:""},ge=function(e,r){var o;let t=R(o=O,E,Te).call(o,r,8);return t==null?e:e+"_"+t},Pe=function(e,r){var t;return e+"_"+R(t=O,E,Ar).call(t,r)},Ge=function(e,r){var o;let t=R(o=O,E,Te).call(o,r,7);return t==null?e:e+"_"+t},fr=function(e,r){var o;let t=R(o=O,E,Te).call(o,r,1);return t==null?e:e+"_"+t},v=function(e,r){var o;let t=R(o=O,E,hr).call(o,r);return t!=null||(t=R(this,E,Cr).call(this,r),t!=null)?e+"_"+t:e},_r=function(e,r){let t=JSON.parse(r),o=e+"_"+t.AccountId;if(t.InstrumentId)return o+"_"+t.InstrumentId},Te=function(e,r){let t=JSON.parse(e);return t.length==0||t[0].length<=r?null:t[0][r]},Ar=function(e){return JSON.parse(e).InstrumentId},Vr=function(e){return JSON.parse(e).Instrument},hr=function(e){return JSON.parse(e).AccountId},Cr=function(e){return JSON.parse(e).Account},p(O,E),p(O,de,{SubscribeLevel1:R(O,E,Pe),Level1UpdateEvent:R(O,E,Pe),SubscribeLevel2:R(O,E,Ge),Level2UpdateEvent:R(O,E,Ge),SubscribeTicker:R(O,E,ge),TickerDataUpdateEvent:R(O,E,ge),SubscribeTrades:R(O,E,fr),SubscribeOrderStateEvents:R(O,E,_r),TransactionEvent:R(O,E,v),WithdrawTicketUpdateEvent:R(O,E,v),AccountPositionEvent:R(O,E,v),OrderTradeEvent:R(O,E,v),OrderStateEvent:R(O,E,v),DepositTicketUpdateEvent:R(O,E,v),AccountInfoUpdateEvent:R(O,E,v),CancelOrderRejectEvent:R(O,E,v),DepositEvent:R(O,E,v)});var L=O;var Wr=n=>{},ne,b,A,ie,me,h,vr,Ur,Oe,gr,Pr,Ie=class{constructor(e){p(this,h);p(this,ne);p(this,b);p(this,A);p(this,ie);p(this,me);S(this,ne,e.domain),S(this,b,new le),S(this,ie,e.peekMessageIn||(r=>{})),S(this,me,e.peekMessageOut||(r=>{}))}connect(){return i(this,arguments,function*(e={}){return S(this,A,new Nr.default("wss://"+s(this,ne)+"/wsgateway")),s(this,A).onopen=r=>{var t;return(t=e.onOpen)==null?void 0:t.call(e,r)},s(this,A).onclose=r=>{var t;return(t=e.onClose)==null?void 0:t.call(e,r)},s(this,A).onerror=r=>{var t;return(t=e.onError)==null?void 0:t.call(e,r)},s(this,A).addEventListener("message",r=>{let t=JSON.parse(r.data);R(this,h,Ur).call(this,t)}),s(this,A).addEventListener("message",r=>{var t;return(t=e.onMessage)==null?void 0:t.call(e,r)}),new Promise((r,t)=>s(this,A).addEventListener("open",o=>r()))})}close(){s(this,A).close()}get readyState(){return s(this,A).readyState}request(e,r,t){return R(this,h,Oe).call(this,e,t,0)}subscribe(e,r,t,o,a){return i(this,null,function*(){return a.map(m=>s(this,b).addSubscriptionCallback(L.get(m.eventName,r,t),m.eventHandler)),R(this,h,Oe).call(this,e,o,0)})}unsubscribe(e,r,t,o,a){return i(this,null,function*(){return s(this,b).removeSubscriptionCallback(a.map(m=>L.get(m,r,t))),yield R(this,h,Oe).call(this,e,o,0)})}closeConnection(){s(this,A).socket.close()}authenticateUser(e){return i(this,null,function*(){yield this.request("AuthenticateUser",2,e)})}};ne=new WeakMap,b=new WeakMap,A=new WeakMap,ie=new WeakMap,me=new WeakMap,h=new WeakSet,vr=function(e){return L.getFromMessageFrame(e)},Ur=function(e){s(this,ie).call(this,e);let r=s(this,b).popCallback(e.i);if(r!=null&&(r(e),Yr(e)))return;let t=R(this,h,vr).call(this,e),o=s(this,b).getSubscriptionCallback(t);if(o!=null){o(e);return}},Oe=function(e,r,t=0){return new Promise((o,a)=>{R(this,h,Pr).call(this,e,JSON.stringify(r)||"{}",t,R(this,h,gr).call(this,a,o))})},gr=function(e,r){return t=>{try{var o=JSON.parse(t.o)}catch(m){e(Kr(t.o));return}if(t.m===5){e(new D(o));return}var a=o;if((a==null?void 0:a.result)===!1&&(a==null?void 0:a.errormsg)!=null){e(new D(o));return}r(o)}},Pr=function(e,r,t,o=Wr){let a=s(this,b).putCallback(o),m={m:t,i:a,n:e,o:r};s(this,me).call(this,m),s(this,A).send(JSON.stringify(m))};function Kr(n){return new D({result:!1,errormsg:n,errorcode:Ir.UNDEFINED,statusCode:-1,detail:""})}function Yr(n){if(n.m===5)return!0;try{return n.o.result==!1}catch(r){return!1}}function U(n,e){return e==null?null:g(n,e)}function g(n,e){return{eventName:n,eventHandler:r=>e(Jr(r.o))}}function Jr(n){return JSON.parse(n)}var f,fe=class{constructor(e){p(this,f);this.OMS_ID=1;S(this,f,e)}subscribeLevel1(e,r,t){return i(this,null,function*(){if(!e.InstrumentId&&!e.Symbol)throw new Error("Either InstrumentId or Symbol must be specified for Level1 subscription.");let o=u(e,this.OMS_ID);return yield s(this,f).subscribe("SubscribeLevel1",e.InstrumentId||null,null,o,[g("SubscribeLevel1",r),g("Level1UpdateEvent",t)])})}unsubscribeLevel1(e){return i(this,null,function*(){if(!e.InstrumentId&&!e.Symbol)throw new Error("Either InstrumentId or Symbol must be specified for Level1 unsubscription.");let r=u(e,this.OMS_ID);yield s(this,f).unsubscribe("UnsubscribeLevel1",e.InstrumentId||null,null,r,["SubscribeLevel1","UnsubscribeLevel1"])})}subscribeLevel2(e,r,t){return i(this,null,function*(){if(!e.InstrumentId&&!e.Symbol)throw new Error("Either InstrumentId or Symbol must be specified for Level2 subscription.");let o=u(e,this.OMS_ID);return yield s(this,f).subscribe("SubscribeLevel2",e.InstrumentId,null,o,[g("SubscribeLevel2",r),g("Level2UpdateEvent",t)])})}unsubscribeLevel2(e){return i(this,null,function*(){if(!e.InstrumentId&&!e.Symbol)throw new Error("Either InstrumentId or Symbol must be specified for Level2 unsubscription.");let r=u(e,this.OMS_ID);yield s(this,f).unsubscribe("UnsubscribeLevel2",e.InstrumentId||null,null,r,[L.get("SubscribeLevel2",e.InstrumentId)])})}subscribeTrades(e,r){return i(this,null,function*(){if(!e.InstrumentId)throw new Error("InstrumentId is required for subscribing to trades.");if(!e.IncludeLastCount||e.IncludeLastCount<0)throw new Error("IncludeLastCount must be a non-negative number.");let t=u(e,this.OMS_ID);return yield s(this,f).subscribe("SubscribeTrades",e.InstrumentId,null,t,[g("SubscribeTrades",o=>r(Se(o)))])})}unsubscribeTrades(e){return i(this,null,function*(){if(!e.InstrumentId)throw new Error("InstrumentId is required for unsubscribing from trades.");let r=u(e,this.OMS_ID);yield s(this,f).unsubscribe("UnsubscribeTrades",e.InstrumentId,null,r,["SubscribeTrades"])})}subscribeTicker(e,r,t){return i(this,null,function*(){if(!e.InstrumentId)throw new Error("InstrumentId is required for subscribing from ticker.");if(!e.Interval)throw new Error("Interval is required for subscribing from ticker.");if(!e.IncludeLastCount)throw new Error("IncludeLastCount is required for subscribing from ticker.");let o=u(e,this.OMS_ID);return yield s(this,f).subscribe("SubscribeTicker",e.InstrumentId||null,null,o,[g("SubscribeTicker",r),g("TickerDataUpdateEvent_"+e.InstrumentId,t)])})}unsubscribeTicker(e){return i(this,null,function*(){if(!e.InstrumentId)throw new Error("InstrumentId is required for unsubscribing from ticker.");let r=u(e,this.OMS_ID);yield s(this,f).unsubscribe("UnsubscribeTicker",e.InstrumentId||null,null,r,["SubscribeTicker"])})}subscribeAccountEvents(e,r){return i(this,null,function*(){if(!e.AccountId)throw new Error("AccountId is required for subscribing to account events.");let t=u(e,this.OMS_ID);return yield s(this,f).subscribe("SubscribeAccountEvents",e.AccountId,null,t,[U("WithdrawTicketUpdateEvent",r.withdrawTicketUpdateEventHandler||null),U("OrderTradeEvent",r.orderTradeEventHandler||null),U("OrderStateEvent",r.orderStateEventHandler||null),U("DepositTicketUpdateEvent",r.depositTicketUpdateEventHandler||null),U("AccountPositionEvent",r.accountPositionEventHandler||null),U("AccountInfoUpdateEvent",r.accountInfoUpdateEventHandler||null),U("CancelOrderRejectEvent",r.cancelOrderRejectEventHandler||null),U("DepositEvent",r.depositEventHandler||null),U("TransactionEvent",r.transactionEventHandler||null)].filter(o=>o!=null))})}unsubscribeAccountEvents(e){return i(this,null,function*(){if(!e.AccountId)throw new Error("AccountId is required for unsubscribing from account events.");let r=u(e,this.OMS_ID);yield s(this,f).unsubscribe("UnsubscribeAccountEvents",e.AccountId,null,r,["WithdrawTicketUpdateEvent","OrderTradeEvent","OrderStateEvent","DepositTicketUpdateEvent","AccountPositionEvent","AccountInfoUpdateEvent","CancelOrderRejectEvent","DepositEvent","TransactionEvent"])})}subscribeOrderStateEvents(e,r){return i(this,null,function*(){if(!e.AccountId)throw new Error("AccountId is required for subscribing to order state events.");let t=u(e,this.OMS_ID);return yield s(this,f).subscribe("SubscribeOrderStateEvents",e.AccountId,e.InstrumentId||null,t,[g("OrderStateEvent",r)])})}unsubscribeOrderStateEvents(e){return i(this,null,function*(){if(!e.AccountId)throw new Error("AccountId is required for unsubscribing from order state events.");let r=u(e,this.OMS_ID);yield s(this,f).unsubscribe("UnsubscribeOrderStateEvents",e.AccountId,e.InstrumentId||null,r,["SubscribeOrderStateEvents"])})}};f=new WeakMap;var Qr="api.notbank.exchange",I,ue=class{constructor(e){p(this,I);let r=(e==null?void 0:e.domain)||Qr;S(this,I,new Ie({domain:r,peekMessageIn:e==null?void 0:e.peekMessageIn,peekMessageOut:e==null?void 0:e.peekMessageOut}))}connect(e={}){return s(this,I).connect(e)}close(){s(this,I).close()}get isConnecting(){return s(this,I).readyState===WebSocket.CONNECTING}get isConnected(){return s(this,I).readyState===WebSocket.OPEN}get isClosing(){return s(this,I).readyState===WebSocket.CLOSING}get isClosed(){return s(this,I).readyState===WebSocket.CLOSED}authenticateUser(e){return i(this,null,function*(){var r=re(),t=te(e.ApiPublicKey,e.ApiSecretKey,e.UserId,r);yield s(this,I).authenticateUser({ApiKey:e.ApiPublicKey,Signature:t,UserId:e.UserId,Nonce:r})})}newAccountService(){return new V(s(this,I))}newAuthService(){return new K(s(this,I))}newFeeService(){return new Y(s(this,I))}newInstrumentService(){return new J(s(this,I))}newProductService(){return new Q(s(this,I))}newReportService(){return new $(s(this,I))}newSystemService(){return new X(s(this,I))}newSubscriptionService(){return new fe(s(this,I))}newTradingService(){return new Z(s(this,I))}newUserService(){return new k(s(this,I))}};I=new WeakMap;var $r=oe,zr=ue,Xr={HttpClient:oe,WebsocketClient:ue,models:ve};return Fr(Zr);})();
//# sourceMappingURL=bundle.min.js.map
